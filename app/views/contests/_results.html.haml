%article#all-result
  %h2 Leaderboard
  - if can? :download_results, @contest
    = link_to 'Download Hasil Lengkap',
      contest_download_results_path(contest_id: @contest.id),
      class: 'btn btn-lg'
  .table-responsive
    %table.table.table-hover.table-bordered.contest-results
      %thead
        %tr
          %th Peringkat
          %th Username
          - unless @short_problems.empty? || @long_problems.empty?
            %th Bagian A
          - @long_problems.each do |lp|
            - if @short_problems.empty?
              %th No. #{lp.problem_no}
            - else
              %th Bagian B no. #{lp.problem_no}
          %th Total
          %th Penghargaan

      %tbody
        - @user_contests.each do |uc|
          - user = uc.user
          %tr{ class: row_classes(user, ['clickable-row', uc.award.downcase]), data: { link: user_path(user) } }
            %td= uc.rank
            %td= user.username
            - unless @no_short_probs
              %td= uc.short_mark
            - @long_problems.each do |lp|
              - if mask_score?(lp)
                - @mask = true
                %td ?
              - else
                %td= score(uc, lp)
            %td= @mask ? '?' : uc.total_mark
            %td= uc.award
